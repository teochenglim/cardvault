<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CardVault</title>
<style>
/* â”€â”€â”€ Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --accent:        #4f46e5;
  --accent-hover:  #4338ca;
  --accent-light:  #ede9fe;
  --bg:            #f1f5f9;
  --card-bg:       #ffffff;
  --text:          #1e293b;
  --text-muted:    #64748b;
  --border:        #e2e8f0;
  --danger:        #ef4444;
  --danger-hover:  #dc2626;
  --success:       #22c55e;
  --warning:       #f59e0b;
  --shadow:        0 1px 3px rgba(0,0,0,.08), 0 1px 2px rgba(0,0,0,.05);
  --shadow-md:     0 4px 12px rgba(0,0,0,.08), 0 2px 6px rgba(0,0,0,.05);
  --shadow-lg:     0 10px 30px rgba(0,0,0,.12);
  --radius:        12px;
  --radius-sm:     8px;
  --font:          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}
[data-theme="dark"] {
  --bg:         #0f172a;
  --card-bg:    #1e293b;
  --text:       #f1f5f9;
  --text-muted: #94a3b8;
  --border:     #334155;
  --accent-light: #312e81;
  --shadow:     0 1px 3px rgba(0,0,0,.4);
  --shadow-md:  0 4px 12px rgba(0,0,0,.4);
  --shadow-lg:  0 10px 30px rgba(0,0,0,.5);
}

/* â”€â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--font); background: var(--bg); color: var(--text); min-height: 100vh; transition: background .2s, color .2s; }
button { font-family: inherit; cursor: pointer; border: none; }
input, textarea, select { font-family: inherit; }
a { color: var(--accent); text-decoration: none; }
img { max-width: 100%; }

/* â”€â”€â”€ Navbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.navbar {
  position: sticky; top: 0; z-index: 100;
  display: flex; align-items: center; gap: 12px;
  padding: 0 24px; height: 60px;
  background: var(--card-bg); border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow);
}
.nav-brand {
  font-size: 1.25rem; font-weight: 700;
  color: var(--accent); white-space: nowrap; margin-right: 8px;
}
.nav-brand span { color: var(--text-muted); font-weight: 400; font-size: .85rem; margin-left: 6px; }
.search-wrap { position: relative; flex: 1; max-width: 420px; }
.search-wrap svg { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; }
.search-bar {
  width: 100%; padding: 8px 12px 8px 38px;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  background: var(--bg); color: var(--text); font-size: .9rem;
  outline: none; transition: border-color .15s;
}
.search-bar:focus { border-color: var(--accent); }
.nav-right { display: flex; align-items: center; gap: 8px; margin-left: auto; }
.btn-primary {
  padding: 8px 16px; border-radius: var(--radius-sm);
  background: var(--accent); color: #fff; font-size: .9rem; font-weight: 500;
  transition: background .15s;
}
.btn-primary:hover { background: var(--accent-hover); }
.btn-secondary {
  padding: 8px 16px; border-radius: var(--radius-sm);
  background: transparent; color: var(--text-muted); font-size: .9rem; font-weight: 500;
  border: 1px solid var(--border); transition: background .15s;
}
.btn-secondary:hover { background: var(--bg); }
.btn-danger {
  padding: 8px 16px; border-radius: var(--radius-sm);
  background: var(--danger); color: #fff; font-size: .9rem; font-weight: 500;
  transition: background .15s;
}
.btn-danger:hover { background: var(--danger-hover); }
.btn-icon {
  width: 36px; height: 36px; border-radius: var(--radius-sm);
  background: transparent; color: var(--text-muted); font-size: 1.1rem;
  display: flex; align-items: center; justify-content: center;
  transition: background .15s;
}
.btn-icon:hover { background: var(--bg); }
.btn-sm {
  padding: 5px 10px; border-radius: 6px; font-size: .8rem; font-weight: 500;
  background: transparent; color: var(--text-muted); border: 1px solid var(--border);
  transition: background .15s, color .15s;
}
.btn-sm:hover { background: var(--bg); color: var(--text); }
.btn-sm.danger { color: var(--danger); border-color: transparent; }
.btn-sm.danger:hover { background: #fee2e2; }

/* â”€â”€â”€ Tag filter bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tag-bar {
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
  padding: 12px 24px; background: var(--card-bg);
  border-bottom: 1px solid var(--border);
}
.tag-bar-label { font-size: .8rem; color: var(--text-muted); font-weight: 500; }
.tag-chip {
  padding: 4px 12px; border-radius: 99px; font-size: .8rem; font-weight: 500; cursor: pointer;
  background: var(--bg); color: var(--text-muted); border: 1px solid var(--border);
  transition: all .15s;
}
.tag-chip:hover { border-color: var(--accent); color: var(--accent); }
.tag-chip.active { background: var(--accent); color: #fff; border-color: var(--accent); }

/* â”€â”€â”€ Card grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px; padding: 24px;
}
@media (max-width: 1100px) { .card-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 700px)  { .card-grid { grid-template-columns: 1fr; padding: 16px; } }

/* â”€â”€â”€ Business Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.biz-card {
  background: var(--card-bg); border-radius: var(--radius);
  box-shadow: var(--shadow); border: 1px solid var(--border);
  transition: box-shadow .2s, transform .15s; overflow: hidden;
  display: flex; flex-direction: column; cursor: pointer;
}
.biz-card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }
.biz-card-top {
  display: flex; align-items: flex-start; gap: 14px; padding: 18px 18px 14px;
}
.avatar {
  width: 56px; height: 56px; border-radius: 50%; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.2rem; font-weight: 700; color: #fff; overflow: hidden;
}
.avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
.card-info { flex: 1; min-width: 0; }
.card-name { font-size: 1rem; font-weight: 700; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.card-title { font-size: .82rem; color: var(--text-muted); margin-top: 2px; }
.card-company { font-size: .85rem; font-weight: 500; color: var(--accent); margin-top: 2px; }
.biz-card-mid {
  padding: 0 18px 12px; border-top: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 5px;
  padding-top: 12px; font-size: .83rem; color: var(--text-muted);
}
.contact-row { display: flex; align-items: center; gap: 8px; overflow: hidden; }
.contact-row span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.biz-card-bot {
  padding: 8px 18px 14px;
  display: flex; align-items: center; gap: 6px; flex-wrap: wrap;
  margin-top: auto;
}
.tag-pill {
  padding: 2px 8px; border-radius: 99px; font-size: .74rem; font-weight: 500;
  background: var(--accent-light); color: var(--accent);
}
.card-actions { margin-left: auto; display: flex; gap: 4px; }

/* â”€â”€â”€ Empty state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.empty-state {
  grid-column: 1 / -1; text-align: center; padding: 80px 20px; color: var(--text-muted);
}
.empty-state svg { width: 64px; height: 64px; margin-bottom: 16px; opacity: .4; }
.empty-state p { font-size: 1.1rem; font-weight: 500; margin-bottom: 6px; }
.empty-state small { font-size: .85rem; }

/* â”€â”€â”€ Skeleton â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.skeleton {
  background: var(--card-bg); border-radius: var(--radius);
  border: 1px solid var(--border); padding: 18px; animation: pulse 1.5s infinite;
}
.skel-row { height: 14px; border-radius: 6px; background: var(--border); margin-bottom: 10px; }
.skel-row.wide { width: 70%; }
.skel-row.mid  { width: 50%; }
.skel-row.short{ width: 35%; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }

/* â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.45); z-index: 200;
  display: none; align-items: center; justify-content: center; padding: 16px;
}
.overlay.open { display: flex; }
.modal {
  background: var(--card-bg); border-radius: var(--radius);
  width: 100%; max-width: 620px; max-height: 90vh;
  box-shadow: var(--shadow-lg); display: flex; flex-direction: column;
  overflow: hidden;
}
.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 20px; border-bottom: 1px solid var(--border); flex-shrink: 0;
}
.modal-header h2 { font-size: 1.1rem; font-weight: 700; }
.modal-tabs {
  display: flex; border-bottom: 1px solid var(--border); flex-shrink: 0;
  overflow-x: auto;
}
.modal-tab {
  padding: 10px 18px; font-size: .85rem; font-weight: 500; color: var(--text-muted);
  background: none; border-bottom: 2px solid transparent; white-space: nowrap;
  transition: color .15s, border-color .15s;
}
.modal-tab.active { color: var(--accent); border-color: var(--accent); }
.modal-body { flex: 1; overflow-y: auto; padding: 20px; }
.modal-footer {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 20px; border-top: 1px solid var(--border); flex-shrink: 0;
}
.modal-footer-right { display: flex; gap: 8px; }

/* â”€â”€â”€ Form elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tab-panel { display: none; }
.tab-panel.active { display: block; }
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-size: .82rem; font-weight: 600; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: .04em; }
.form-input {
  width: 100%; padding: 9px 12px; border: 1px solid var(--border); border-radius: var(--radius-sm);
  background: var(--bg); color: var(--text); font-size: .9rem; outline: none;
  transition: border-color .15s;
}
.form-input:focus { border-color: var(--accent); }
.form-input.error { border-color: var(--danger); }
.form-textarea { resize: vertical; min-height: 80px; }
.form-row { display: flex; gap: 10px; }
.form-row .form-group { flex: 1; }

/* â”€â”€â”€ Dynamic rows (phones, emails, addresses) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.dynamic-section { margin-bottom: 20px; }
.dynamic-section-title { font-size: .82rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: .05em; margin-bottom: 10px; }
.dynamic-row {
  display: flex; gap: 8px; align-items: flex-end; margin-bottom: 8px;
  padding: 10px; background: var(--bg); border-radius: var(--radius-sm);
}
.dynamic-row .form-group { margin-bottom: 0; }
.dynamic-row .label-select {
  width: 110px; flex-shrink: 0; padding: 9px 8px;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  background: var(--card-bg); color: var(--text); font-size: .85rem; outline: none;
}
.dynamic-row .flex1 { flex: 1; }
.remove-row-btn {
  width: 30px; height: 30px; border-radius: 6px; flex-shrink: 0;
  background: transparent; color: var(--text-muted); font-size: 1rem;
  display: flex; align-items: center; justify-content: center;
  transition: background .15s, color .15s;
}
.remove-row-btn:hover { background: #fee2e2; color: var(--danger); }
.add-row-btn {
  font-size: .82rem; color: var(--accent); background: none; padding: 4px 0;
  font-weight: 500; display: flex; align-items: center; gap: 4px;
}
.add-row-btn:hover { color: var(--accent-hover); }

/* â”€â”€â”€ Photo upload â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.photo-section { margin-bottom: 20px; display: flex; gap: 16px; align-items: flex-start; }
.photo-preview {
  width: 80px; height: 80px; border-radius: 50%; background: var(--bg);
  border: 2px dashed var(--border); display: flex; align-items: center;
  justify-content: center; flex-shrink: 0; overflow: hidden; font-size: 1.8rem;
  cursor: pointer; transition: border-color .15s;
}
.photo-preview:hover { border-color: var(--accent); }
.photo-preview img { width: 100%; height: 100%; object-fit: cover; }
.photo-actions { flex: 1; }
.photo-drop {
  border: 2px dashed var(--border); border-radius: var(--radius-sm);
  padding: 16px; text-align: center; cursor: pointer; font-size: .85rem;
  color: var(--text-muted); transition: border-color .15s, background .15s;
}
.photo-drop:hover, .photo-drop.dragover { border-color: var(--accent); background: var(--accent-light); }
.photo-drop input { display: none; }

/* â”€â”€â”€ Tag pill input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tag-input-wrap {
  display: flex; flex-wrap: wrap; gap: 6px; align-items: center;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  padding: 6px 10px; background: var(--bg); cursor: text; min-height: 42px;
  transition: border-color .15s;
}
.tag-input-wrap:focus-within { border-color: var(--accent); }
.tag-pill-removable {
  display: flex; align-items: center; gap: 4px;
  padding: 2px 8px; border-radius: 99px; font-size: .8rem; font-weight: 500;
  background: var(--accent-light); color: var(--accent);
}
.tag-pill-removable button { background: none; color: var(--accent); font-size: .9rem; line-height: 1; padding: 0; }
.tag-input {
  border: none; outline: none; background: transparent; font-size: .85rem;
  color: var(--text); min-width: 80px; flex: 1;
}

/* â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast-container {
  position: fixed; bottom: 20px; right: 20px; z-index: 999;
  display: flex; flex-direction: column; gap: 8px;
}
.toast {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 18px; border-radius: var(--radius-sm);
  box-shadow: var(--shadow-md); font-size: .88rem; font-weight: 500;
  color: #fff; animation: slideIn .25s ease; min-width: 220px;
}
.toast.success { background: var(--success); }
.toast.error   { background: var(--danger); }
.toast.info    { background: var(--accent); }
@keyframes slideIn { from { transform: translateX(100%); opacity:0; } to { transform:none; opacity:1; } }

/* â”€â”€â”€ Confirm dialog â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.confirm-box {
  background: var(--card-bg); border-radius: var(--radius);
  padding: 24px; width: 100%; max-width: 380px;
  box-shadow: var(--shadow-lg); text-align: center;
}
.confirm-box h3 { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
.confirm-box p  { font-size: .88rem; color: var(--text-muted); margin-bottom: 20px; }
.confirm-actions { display: flex; gap: 10px; justify-content: center; }

/* â”€â”€â”€ Card count badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.count-badge { font-size: .78rem; color: var(--text-muted); padding-left: 8px; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="nav-brand">CardVault <span id="cardCount"></span></div>
  <div class="search-wrap">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
    <input id="searchBar" class="search-bar" type="search" placeholder="Search name, company, emailâ€¦" oninput="onSearch(this.value)">
  </div>
  <div class="nav-right">
    <button class="btn-primary" onclick="openModal(null)">+ Add Card</button>
    <button class="btn-icon" id="themeToggle" onclick="toggleTheme()" title="Toggle dark mode">ğŸŒ™</button>
  </div>
</nav>

<!-- Tag filter bar -->
<div class="tag-bar" id="tagBar">
  <span class="tag-bar-label">Filter:</span>
  <span id="tagChips"></span>
</div>

<!-- Card grid -->
<main class="card-grid" id="cardGrid"></main>

<!-- â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="overlay" id="modalOverlay" onclick="overlayClick(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h2 id="modalTitle">Add Card</h2>
      <button class="btn-icon" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-tabs" id="modalTabs">
      <button class="modal-tab active" data-tab="basic"   onclick="switchTab('basic')">Basic Info</button>
      <button class="modal-tab"        data-tab="contact" onclick="switchTab('contact')">Contact</button>
      <button class="modal-tab"        data-tab="address" onclick="switchTab('address')">Address</button>
      <button class="modal-tab"        data-tab="tags"    onclick="switchTab('tags')">Tags &amp; Notes</button>
    </div>
    <div class="modal-body">
      <!-- Basic Info -->
      <div class="tab-panel active" id="tab-basic">
        <div class="photo-section">
          <div class="photo-preview" id="photoPreview" onclick="document.getElementById('photoFile').click()">ğŸ“·</div>
          <div class="photo-actions">
            <div class="photo-drop" id="photoDrop" onclick="document.getElementById('photoFile').click()">
              <input type="file" id="photoFile" accept="image/jpeg,image/png,image/webp" onchange="onPhotoSelect(event)">
              Drag &amp; drop a photo or <strong>click to browse</strong><br>
              <small>JPG, PNG, WebP Â· max 5 MB</small>
            </div>
            <button id="removePhotoBtn" class="btn-sm danger" style="display:none;margin-top:6px" onclick="removePhoto()">Remove photo</button>
          </div>
        </div>
        <div class="form-group">
          <label>Name <span style="color:var(--danger)">*</span></label>
          <input id="f-name" class="form-input" type="text" placeholder="Full name" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Job Title</label>
            <input id="f-title" class="form-input" type="text" placeholder="e.g. Software Engineer">
          </div>
          <div class="form-group">
            <label>Company</label>
            <input id="f-company" class="form-input" type="text" placeholder="e.g. Acme Corp">
          </div>
        </div>
        <div class="form-group">
          <label>Website</label>
          <input id="f-website" class="form-input" type="url" placeholder="https://â€¦">
        </div>
      </div>

      <!-- Contact -->
      <div class="tab-panel" id="tab-contact">
        <div class="dynamic-section">
          <div class="dynamic-section-title">ğŸ“± Phones</div>
          <div id="phoneRows"></div>
          <button class="add-row-btn" onclick="addPhone()">+ Add phone</button>
        </div>
        <div class="dynamic-section">
          <div class="dynamic-section-title">ğŸ“§ Emails</div>
          <div id="emailRows"></div>
          <button class="add-row-btn" onclick="addEmail()">+ Add email</button>
        </div>
      </div>

      <!-- Address -->
      <div class="tab-panel" id="tab-address">
        <div class="dynamic-section">
          <div class="dynamic-section-title">ğŸ“ Addresses</div>
          <div id="addressRows"></div>
          <button class="add-row-btn" onclick="addAddress()">+ Add address</button>
        </div>
      </div>

      <!-- Tags & Notes -->
      <div class="tab-panel" id="tab-tags">
        <div class="form-group">
          <label>Tags</label>
          <div class="tag-input-wrap" id="tagInputWrap" onclick="document.getElementById('tagInput').focus()">
            <div id="tagPills"></div>
            <input id="tagInput" class="tag-input" placeholder="Type tag, press Enter or comma" onkeydown="onTagKey(event)" oninput="onTagInput(event)">
          </div>
          <small style="color:var(--text-muted);font-size:.78rem;margin-top:4px;display:block">Press Enter or comma to add</small>
        </div>
        <div class="form-group">
          <label>Notes</label>
          <textarea id="f-notes" class="form-input form-textarea" placeholder="Any notes about this contactâ€¦"></textarea>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div>
        <button id="deleteCardBtn" class="btn-danger" style="display:none" onclick="confirmDeleteCurrent()">Delete Card</button>
      </div>
      <div class="modal-footer-right">
        <button class="btn-secondary" onclick="closeModal()">Cancel</button>
        <button class="btn-primary" onclick="saveCard()">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- Confirm overlay -->
<div class="overlay" id="confirmOverlay">
  <div class="confirm-box">
    <h3>Confirm Delete</h3>
    <p id="confirmMsg">Are you sure?</p>
    <div class="confirm-actions">
      <button class="btn-secondary" onclick="closeConfirm()">Cancel</button>
      <button class="btn-danger"    onclick="doConfirm()">Delete</button>
    </div>
  </div>
</div>

<!-- Toast container -->
<div class="toast-container" id="toasts"></div>

<script>
/* â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let allCards   = [];
let allTags    = [];
let activeFilters = new Set();
let searchQ    = '';
let searchTimer = null;
let editingId  = null;   // null = creating
let pendingTags = [];    // tags being edited in modal
let pendingFile = null;  // File object for new photo
let removePhotoFlag = false;
let confirmCb  = null;

/* â”€â”€â”€ API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function api(method, path, body) {
  const opts = { method, headers: {} };
  if (body instanceof FormData) { opts.body = body; }
  else if (body)                 { opts.body = JSON.stringify(body); opts.headers['Content-Type'] = 'application/json'; }
  const r = await fetch(path, opts);
  if (!r.ok) { const t = await r.text(); throw new Error(t || r.statusText); }
  const ct = r.headers.get('content-type') || '';
  return ct.includes('json') ? r.json() : null;
}

async function loadCards() {
  let url = '/api/cards';
  const params = [];
  if (searchQ)                 params.push('q=' + encodeURIComponent(searchQ));
  if (activeFilters.size > 0)  [...activeFilters].forEach(t => params.push('tag=' + encodeURIComponent(t)));
  if (params.length)           url += '?' + params.join('&');
  return api('GET', url);
}

async function loadTags() {
  return api('GET', '/api/tags');
}

/* â”€â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function init() {
  const theme = localStorage.getItem('cv-theme') || 'light';
  setTheme(theme);
  showSkeletons();
  try {
    [allCards, allTags] = await Promise.all([loadCards(), loadTags()]);
    renderTagBar();
    renderGrid();
  } catch(e) {
    toast('Failed to load cards: ' + e.message, 'error');
    document.getElementById('cardGrid').innerHTML = '';
  }
}

/* â”€â”€â”€ Theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setTheme(t) {
  document.documentElement.setAttribute('data-theme', t);
  document.getElementById('themeToggle').textContent = t === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
  localStorage.setItem('cv-theme', t);
}
function toggleTheme() {
  const cur = document.documentElement.getAttribute('data-theme');
  setTheme(cur === 'dark' ? 'light' : 'dark');
}

/* â”€â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function onSearch(v) {
  clearTimeout(searchTimer);
  searchTimer = setTimeout(async () => {
    searchQ = v.trim();
    await refresh();
  }, 300);
}

/* â”€â”€â”€ Tag filter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderTagBar() {
  const wrap = document.getElementById('tagChips');
  wrap.innerHTML = '';
  if (!allTags.length) { document.getElementById('tagBar').style.display = 'none'; return; }
  document.getElementById('tagBar').style.display = '';
  allTags.forEach(t => {
    const chip = document.createElement('button');
    chip.className = 'tag-chip' + (activeFilters.has(t.name) ? ' active' : '');
    chip.textContent = t.name + (t.count ? ` (${t.count})` : '');
    chip.onclick = () => toggleFilter(t.name);
    wrap.appendChild(chip);
  });
}
async function toggleFilter(tag) {
  if (activeFilters.has(tag)) activeFilters.delete(tag);
  else activeFilters.add(tag);
  await refresh();
}

/* â”€â”€â”€ Refresh â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function refresh() {
  try {
    [allCards, allTags] = await Promise.all([loadCards(), loadTags()]);
    renderTagBar();
    renderGrid();
  } catch(e) { toast(e.message, 'error'); }
}

/* â”€â”€â”€ Skeletons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showSkeletons() {
  const g = document.getElementById('cardGrid');
  g.innerHTML = Array(6).fill(0).map(() => `
    <div class="skeleton">
      <div class="skel-row wide"></div>
      <div class="skel-row mid"></div>
      <div class="skel-row short"></div>
    </div>`).join('');
}

/* â”€â”€â”€ Grid render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderGrid() {
  const g = document.getElementById('cardGrid');
  const count = document.getElementById('cardCount');
  count.textContent = allCards.length ? `Â· ${allCards.length} card${allCards.length !== 1 ? 's' : ''}` : '';
  if (!allCards.length) {
    g.innerHTML = `<div class="empty-state">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
      </svg>
      <p>No cards found</p>
      <small>${searchQ || activeFilters.size ? 'Try a different search or filter' : 'Click "+ Add Card" to get started'}</small>
    </div>`;
    return;
  }
  g.innerHTML = allCards.map(c => cardHTML(c)).join('');
}

function initials(name) {
  const parts = name.trim().split(/\s+/);
  if (parts.length === 1) return parts[0][0].toUpperCase();
  return (parts[0][0] + parts[parts.length-1][0]).toUpperCase();
}

function avatarColor(name) {
  const palette = ['#4f46e5','#0284c7','#059669','#d97706','#dc2626','#7c3aed','#db2777','#0891b2'];
  let h = 0; for (const c of name) h = (h * 31 + c.charCodeAt(0)) & 0xffffffff;
  return palette[Math.abs(h) % palette.length];
}

function cardHTML(c) {
  const av = c.photo_url
    ? `<div class="avatar"><img src="${c.photo_url}" alt="" loading="lazy" onerror="this.parentNode.style.background='${avatarColor(c.name)}';this.parentNode.innerHTML='${initials(c.name)}'"></div>`
    : `<div class="avatar" style="background:${avatarColor(c.name)}">${initials(c.name)}</div>`;
  const phone = c.phones?.[0] ? `<div class="contact-row"><span>ğŸ“±</span><span>${esc(c.phones[0].number)}</span></div>` : '';
  const email = c.emails?.[0] ? `<div class="contact-row"><span>ğŸ“§</span><span>${esc(c.emails[0].address)}</span></div>` : '';
  const web   = c.website    ? `<div class="contact-row"><span>ğŸŒ</span><span>${esc(c.website)}</span></div>` : '';
  const tags  = (c.tags||[]).map(t => `<span class="tag-pill">${esc(t)}</span>`).join('');
  return `<div class="biz-card" onclick="openModal(${c.id})">
    <div class="biz-card-top">
      ${av}
      <div class="card-info">
        <div class="card-name">${esc(c.name)}</div>
        ${c.title   ? `<div class="card-title">${esc(c.title)}</div>` : ''}
        ${c.company ? `<div class="card-company">${esc(c.company)}</div>` : ''}
      </div>
    </div>
    ${phone||email||web ? `<div class="biz-card-mid">${phone}${email}${web}</div>` : ''}
    <div class="biz-card-bot">
      ${tags}
      <div class="card-actions" onclick="event.stopPropagation()">
        <button class="btn-sm" onclick="openModal(${c.id})">âœï¸</button>
        <button class="btn-sm danger" onclick="confirmDelete(${c.id},'${esc(c.name)}')">ğŸ—‘ï¸</button>
      </div>
    </div>
  </div>`;
}

function esc(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

/* â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function openModal(id) {
  editingId = id;
  pendingTags = [];
  pendingFile = null;
  removePhotoFlag = false;
  resetForm();

  if (id !== null) {
    document.getElementById('modalTitle').textContent = 'Edit Card';
    document.getElementById('deleteCardBtn').style.display = '';
    try {
      const c = await api('GET', `/api/cards/${id}`);
      fillForm(c);
    } catch(e) { toast('Failed to load card: ' + e.message, 'error'); return; }
  } else {
    document.getElementById('modalTitle').textContent = 'Add Card';
    document.getElementById('deleteCardBtn').style.display = 'none';
  }

  switchTab('basic');
  document.getElementById('modalOverlay').classList.add('open');
}

function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }
function overlayClick(e) { if (e.target.id === 'modalOverlay') closeModal(); }

function switchTab(name) {
  document.querySelectorAll('.modal-tab').forEach(b => b.classList.toggle('active', b.dataset.tab === name));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.toggle('active', p.id === 'tab-' + name));
}

function resetForm() {
  ['f-name','f-title','f-company','f-website','f-notes'].forEach(id => document.getElementById(id).value = '');
  ['f-name'].forEach(id => document.getElementById(id).classList.remove('error'));
  document.getElementById('phoneRows').innerHTML = '';
  document.getElementById('emailRows').innerHTML = '';
  document.getElementById('addressRows').innerHTML = '';
  document.getElementById('photoPreview').innerHTML = 'ğŸ“·';
  document.getElementById('removePhotoBtn').style.display = 'none';
  pendingTags = [];
  renderTagPills();
}

function fillForm(c) {
  document.getElementById('f-name').value    = c.name    || '';
  document.getElementById('f-title').value   = c.title   || '';
  document.getElementById('f-company').value = c.company || '';
  document.getElementById('f-website').value = c.website || '';
  document.getElementById('f-notes').value   = c.notes   || '';
  if (c.photo_url) {
    document.getElementById('photoPreview').innerHTML = `<img src="${c.photo_url}" alt="">`;
    document.getElementById('removePhotoBtn').style.display = '';
  }
  (c.phones||[]).forEach(p => addPhone(p.label, p.number));
  (c.emails||[]).forEach(e => addEmail(e.label, e.address));
  (c.addresses||[]).forEach(a => addAddress(a.label, a.street, a.city, a.country, a.postal));
  pendingTags = [...(c.tags||[])];
  renderTagPills();
}

/* â”€â”€â”€ Dynamic rows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function addPhone(label='mobile', number='') {
  const row = document.createElement('div'); row.className = 'dynamic-row';
  row.innerHTML = `
    <select class="label-select">
      ${['mobile','work','home','fax'].map(l => `<option${l===label?' selected':''}>${l}</option>`).join('')}
    </select>
    <div class="form-group flex1"><input class="form-input" type="tel" placeholder="+65 9123 4567" value="${esc(number)}"></div>
    <button class="remove-row-btn" onclick="this.parentNode.remove()">âœ•</button>`;
  document.getElementById('phoneRows').appendChild(row);
}
function addEmail(label='work', address='') {
  const row = document.createElement('div'); row.className = 'dynamic-row';
  row.innerHTML = `
    <select class="label-select">
      ${['work','personal'].map(l => `<option${l===label?' selected':''}>${l}</option>`).join('')}
    </select>
    <div class="form-group flex1"><input class="form-input" type="email" placeholder="email@example.com" value="${esc(address)}"></div>
    <button class="remove-row-btn" onclick="this.parentNode.remove()">âœ•</button>`;
  document.getElementById('emailRows').appendChild(row);
}
function addAddress(label='office', street='', city='', country='', postal='') {
  const row = document.createElement('div'); row.className = 'dynamic-row'; row.style.flexWrap = 'wrap';
  row.innerHTML = `
    <select class="label-select" style="width:90px">
      ${['office','home','other'].map(l => `<option${l===label?' selected':''}>${l}</option>`).join('')}
    </select>
    <div class="form-group flex1"><input class="form-input" placeholder="Street" value="${esc(street)}"></div>
    <div class="form-group" style="width:100%;display:flex;gap:8px;margin-top:4px">
      <input class="form-input" placeholder="City"    value="${esc(city)}">
      <input class="form-input" placeholder="Country" value="${esc(country)}">
      <input class="form-input" style="max-width:90px" placeholder="Postal" value="${esc(postal)}">
    </div>
    <button class="remove-row-btn" onclick="this.parentNode.remove()">âœ•</button>`;
  document.getElementById('addressRows').appendChild(row);
}

/* â”€â”€â”€ Photo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function onPhotoSelect(e) {
  const file = e.target.files[0];
  if (!file) return;
  if (file.size > 5*1024*1024) { toast('Photo must be under 5 MB', 'error'); return; }
  pendingFile = file;
  const reader = new FileReader();
  reader.onload = ev => {
    document.getElementById('photoPreview').innerHTML = `<img src="${ev.target.result}" alt="">`;
    document.getElementById('removePhotoBtn').style.display = '';
  };
  reader.readAsDataURL(file);
}
function removePhoto() {
  pendingFile = null;
  removePhotoFlag = true;
  document.getElementById('photoPreview').innerHTML = 'ğŸ“·';
  document.getElementById('removePhotoBtn').style.display = 'none';
}

// Drag and drop
const dropEl = document.getElementById('photoDrop');
if (dropEl) {
  dropEl.addEventListener('dragover', e => { e.preventDefault(); dropEl.classList.add('dragover'); });
  dropEl.addEventListener('dragleave', () => dropEl.classList.remove('dragover'));
  dropEl.addEventListener('drop', e => {
    e.preventDefault(); dropEl.classList.remove('dragover');
    const file = e.dataTransfer.files[0];
    if (file) { document.getElementById('photoFile').files = e.dataTransfer.files; onPhotoSelect({ target: { files: e.dataTransfer.files } }); }
  });
}

/* â”€â”€â”€ Tags â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function onTagKey(e) {
  const v = e.target.value.trim();
  if ((e.key === 'Enter' || e.key === ',') && v) {
    e.preventDefault();
    addTag(v.replace(/,/g,'').trim());
    e.target.value = '';
  }
  if (e.key === 'Backspace' && !e.target.value && pendingTags.length) {
    pendingTags.pop(); renderTagPills();
  }
}
function onTagInput(e) {
  const v = e.target.value;
  if (v.endsWith(',')) {
    const t = v.slice(0,-1).trim();
    if (t) addTag(t);
    e.target.value = '';
  }
}
function addTag(t) {
  t = t.toLowerCase().trim();
  if (t && !pendingTags.includes(t)) { pendingTags.push(t); renderTagPills(); }
}
function removeTag(t) { pendingTags = pendingTags.filter(x => x !== t); renderTagPills(); }
function renderTagPills() {
  const el = document.getElementById('tagPills');
  el.innerHTML = pendingTags.map(t =>
    `<span class="tag-pill-removable">${esc(t)}<button onclick="removeTag('${esc(t)}')" type="button">Ã—</button></span>`
  ).join('');
}

/* â”€â”€â”€ Save â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function saveCard() {
  const name = document.getElementById('f-name').value.trim();
  if (!name) {
    document.getElementById('f-name').classList.add('error');
    switchTab('basic');
    toast('Name is required', 'error');
    return;
  }
  document.getElementById('f-name').classList.remove('error');

  // Build phones
  const phones = [...document.getElementById('phoneRows').querySelectorAll('.dynamic-row')].map(r => ({
    label: r.querySelector('select').value,
    number: r.querySelector('input').value.trim()
  })).filter(p => p.number);

  // Build emails
  const emails = [...document.getElementById('emailRows').querySelectorAll('.dynamic-row')].map(r => ({
    label: r.querySelector('select').value,
    address: r.querySelector('input').value.trim()
  })).filter(e => e.address);

  // Build addresses
  const addresses = [...document.getElementById('addressRows').querySelectorAll('.dynamic-row')].map(r => {
    const inputs = r.querySelectorAll('input');
    return {
      label:   r.querySelector('select').value,
      street:  inputs[0]?.value.trim() || '',
      city:    inputs[1]?.value.trim() || '',
      country: inputs[2]?.value.trim() || '',
      postal:  inputs[3]?.value.trim() || ''
    };
  }).filter(a => a.street || a.city);

  const fd = new FormData();
  fd.append('name',    name);
  fd.append('title',   document.getElementById('f-title').value.trim());
  fd.append('company', document.getElementById('f-company').value.trim());
  fd.append('website', document.getElementById('f-website').value.trim());
  fd.append('notes',   document.getElementById('f-notes').value.trim());
  fd.append('phones',    JSON.stringify(phones));
  fd.append('emails',    JSON.stringify(emails));
  fd.append('addresses', JSON.stringify(addresses));
  fd.append('tags',      JSON.stringify(pendingTags));
  if (pendingFile) fd.append('photo', pendingFile);

  try {
    if (editingId === null) {
      await api('POST', '/api/cards', fd);
      toast('Card created', 'success');
    } else {
      await api('PUT', `/api/cards/${editingId}`, fd);
      if (removePhotoFlag) {
        try { await api('DELETE', `/api/cards/${editingId}/photo`); } catch(_) {}
      }
      toast('Card updated', 'success');
    }
    closeModal();
    await refresh();
  } catch(e) { toast('Error: ' + e.message, 'error'); }
}

/* â”€â”€â”€ Delete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function confirmDelete(id, name) {
  showConfirm(`Delete "${name}"? This cannot be undone.`, async () => {
    // Optimistic remove
    allCards = allCards.filter(c => c.id !== id);
    renderGrid();
    try {
      await api('DELETE', `/api/cards/${id}`);
      await refresh();
      toast('Card deleted', 'success');
    } catch(e) { await refresh(); toast('Delete failed: ' + e.message, 'error'); }
  });
}
function confirmDeleteCurrent() { confirmDelete(editingId, document.getElementById('f-name').value || 'this card'); closeModal(); }

/* â”€â”€â”€ Confirm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showConfirm(msg, cb) {
  document.getElementById('confirmMsg').textContent = msg;
  confirmCb = cb;
  document.getElementById('confirmOverlay').classList.add('open');
}
function closeConfirm() { document.getElementById('confirmOverlay').classList.remove('open'); confirmCb = null; }
function doConfirm()    { const cb = confirmCb; closeConfirm(); if (cb) cb(); }

/* â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toast(msg, type='info') {
  const el = document.createElement('div');
  el.className = `toast ${type}`;
  el.textContent = msg;
  document.getElementById('toasts').prepend(el);
  setTimeout(() => el.remove(), 3500);
}

init();
</script>
</body>
</html>
